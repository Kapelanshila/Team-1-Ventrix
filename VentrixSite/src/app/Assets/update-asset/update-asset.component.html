<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

<div class="body">
    <app-navigation></app-navigation>
    <div class="asset-card">
        <form class="form-user"  [formGroup]="assetform" (ngSubmit)="editAsset()"><span class="reauth-email"> </span>
            <h4 class="card-title">Update Asset Item </h4>
            <hr>
            <label>Name</label>
            <div *ngIf="submitted">
                <span *ngIf="f['name'].errors?.['required'] || f['name'].errors?.['noWhiteSpaceValidator']" class="text-danger">Please enter an asset name</span>
            </div>
            <input maxlength="32" type="text" class="form-control" formControlName="name" placeholder="Enter Asset Name" required>
            <br>

            <label>Manufacturer</label>
            <div *ngIf="submitted">
                <span *ngIf="f['manufacturer'].errors?.['manufacturer'] || f['manufacturer'].errors?.['noWhitespaceValidator']" class="text-danger" >Please enter a manufacturer name</span>
            </div>
            <div>
            <input maxlength="32" type="text" class="form-control" formControlName="manufacturer" placeholder="Enter Manufacturer Name" required (keypress)="keyPressAlphabet($event)">
            </div>

            <label>Asset Category</label>
            <div *ngIf="submitted">
                <span *ngIf="f['assetCategoryId'].errors?.['assetCategoryId'] || f['assetCategoryId'].errors?.['noWhitespaceValidator']" class="text-danger" >Please select a category</span>
            </div>
            <select class="form-control" formControlName="assetCategoryId" (change)="getTypes()">
                <option selected=""> </option>
                <option *ngFor="let category of categories" [value]=category.assetCategoryId>{{category.description}}</option>
            </select>
            <br>

            <label>Asset Type</label>
            <div *ngIf="submitted">
                <span *ngIf="f['assetTypeId'].errors?.['assetTypeId'] || f['assetTypeId'].errors?.['noWhitespaceValidator']" class="text-danger" >Please select a type</span>
            </div>
            <select  style="padding-bottom: 3%;" class="form-control" formControlName="assetTypeId" >
            
                <option *ngFor="let type of types" [value]=type.assetTypeId>{{type.description}}</option>
            </select>
            <br>

            <label>Asset condition</label>
            <div *ngIf="submitted">
                <span *ngIf="f['conditionId'].errors?.['conditionId'] || f['conditionId'].errors?.['noWhitespaceValidator']" class="text-danger" >Please select a condition</span>
            </div>
            <select class="form-control" formControlName="conditionId">
                <option selected=""> </option>
                <option *ngFor="let condition of conditions" [value]=condition.conditionId>{{condition.description}}</option>
            </select>
            <br>

            <label>Warranty Period</label>
            <div *ngIf="submitted">
                <span *ngIf="f['warrantyPeriodId'].errors?.['warrantyPeriodId'] || f['warrantyPeriodId'].errors?.['noWhitespaceValidator']" class="text-danger" >Please select a warranty period</span>
            </div>
            <select class="form-control" formControlName="warrantyPeriodId">
                <option selected=""> </option>                              
                <option *ngFor="let warrantyPeriod of warrantyPeriods" [value]=warrantyPeriod.warrantyPeriodId>{{warrantyPeriod.value}} year(s)</option>
            </select>
            <br>

            <label>Warehouse</label>
            <div *ngIf="submitted">
                <span *ngIf="f['warehouseId'].errors?.['warehouseId'] || f['warehouseId'].errors?.['noWhitespaceValidator']" class="text-danger" >Please select a condition</span>
            </div>
            <select class="form-control" formControlName="warehouseId">
                <option selected=""> </option>
                <option *ngFor="let warehouse of warehouses" [value]=warehouse.warehouseId>{{warehouse.name}}</option>
            </select>
            <br>

            <label>Warranty Date</label>   
            <div *ngIf="submitted">
                <span *ngIf="f['warrantyDate'].errors?.['warrantyDate'] || f['warrantyDate'].errors?.['noWhitespaceValidator']" class="text-danger" >Please select a warranty date</span>
            </div>
            <div class="md-form md-outline input-with-post-icon datepicker">
                <input placeholder="Select date" type="date" id="warrantyDate" class="form-control" formControlName="warrantyDate">
            </div>
            <br>

            <div class="form-group">
                <label>Asset Image</label>
                <input maxlength="64" class="form-control" #file id="img" type="file" accept="image/jpeg" (change)="uploadFile(file.files!)">
            </div>  

            <br>
            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" (click)="returnDataTable()">
            <input type="submit" class="btn btn-primary" [disabled]="disabled" value="Save">
        </form>
        <div class="text-center"></div>
    </div>
</div>
